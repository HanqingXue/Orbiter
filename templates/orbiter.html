<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>卫星模拟系统</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="{{ static_url('css/bootstrap.min.css') }}" rel="stylesheet">
    <link href="{{ static_url('css/flat-ui.min.css') }}"   rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="{{ static_url('css/index.css') }}">
    <script src="{{ static_url('js/jquery.min.js') }}"></script>
    <script src="{{ static_url('js/flat-ui.min.js') }}"></script>
    <script src="{{ static_url('js/three.js') }}"></script>
    <script src="{{ static_url('js/Projector.js') }}"></script>
    <script src="{{ static_url('js/CanvasRenderer.js') }}"></script>
    <script src="{{ static_url('js/stats.min.js') }}"></script>
    <script type="text/javascript" src="{{ static_url('js/echarts.min.js') }}"></script>
    <script type="text/javascript" src="{{ static_url('js/echarts-gl.min.js') }}"></script>
    <style type="text/css">
      .missile 
      {
        margin-bottom: 5px;
      }
    </style>
  </head>
  <body onload='onLoad();'>
    <div id="navigation">
      <nav class="navbar navbar-inverse" role="navigation">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-01">
            <span class="sr-only">Toggle navigation</span>
          </button>
          <a class="navbar-brand" href="#" style="">卫星模拟系统</a>
        </div>
        <div class="collapse navbar-collapse" id="navbar-collapse-01">
          <form class="navbar-form navbar-right" action="#" role="search">
            <div class="form-group">
              <div class="input-group">
                <input class="form-control" id="navbarInput-01" type="search" placeholder="Search">
                <span class="input-group-btn">
                  <button type="submit" class="btn"><span class="fui-search"></span></button>
                </span>
              </div>
            </div>
          </form>
        </div>
      </nav>
    </div>
    <div class="container">
    	      <div class="col-md-4">
        <div id="overview" class="section">
            <div class="header">
                <h5><i class="fa fa-desktop"></i> 参数</h5>
                <a href="javascript:void(0)">
                    <i class="fa fa-caret-down"></i>
                </a>
            </div> <!-- .header -->
            <div class="body">
              <div class="row-fluid">
                <p><b>同步卫星参数</b></p>
              </div>
              <div class="row-fluid" >
                    <div class="col-md-6">同步卫星方位角</div>
                    <div class="col-md-6">
                      <input class="form-control">
                    </div> <!-- .span8 -->
              </div> <!-- .row-fluid -->
              <div class="row-fluid">
                <p><b>导弹参数</b></p>
              </div>
              <div class="row-fluid" >
                    <div class="col-md-6">初速度</div>
                    <div class="col-md-6 missile">
                      <input class="form-control">
                    </div> <!-- .span8 -->
              </div> <!-- .row-fluid -->
              <div class="row-fluid" >
                    <div class="col-md-6">仰角</div>
                    <div class="col-md-6 missile">
                      <input class="form-control">
                    </div> <!-- .span8 -->
              </div> <!-- .row-fluid -->
              <div class="row-fluid">
                  <div class="col-md-6">方位角</div>
                  <div class="col-md-6 missile">
                    <input class="form-control">
                  </div>
              </div>
              <div class="row-fluid">
                  <div class="col-md-6">纬度</div>
                  <div class="col-md-6 missile">
                    <input class="form-control">
                  </div>
              </div>
              <div class="row-fluid">
                  <div class="col-md-6">经度</div>
                  <div class="col-md-6 missile">
                    <input class="form-control">
                  </div>
              </div>
              <div class="row-fluid">
                  <div class="col-md-6">虚警概率</div>
                  <div class="col-md-6 missile">
                    <input class="form-control">
                  </div>
              </div>
              <div class="row-fluid">
                  <div class="col-md-6">尾焰燃烧强度</div>
                  <div class="col-md-6 missile">
                    <input class="form-control">
                  </div>
              </div>
            </div> <!-- .body -->
            <button class="btn btn-embossed btn-primary col-md-12 missile" id="submit">
          提交
            </button>
        </div> <!-- .section -->

        <div class="section">
          <div class="header">
            <h5><i class="fa fa-desktop"></i> 实时数据</h5>
              <a href="javascript:void(0)">
                <i class="fa fa-caret-down"></i>
              </a>
          </div>
          <div class="body">
          	<div id="water"></div>
          </div>
        </div>
        <button class="btn btn-embossed btn-primary col-md-12 missile" id="orbit">
          3D轨迹绘制
        </button>
      </div><!--/.col-md-->

    <!-- /.container -->
      <div class="col-md-8">
        <div class="alert alert-warning " style="display: none">
          <a href="#" class="close" data-dismiss="alert">
            &times;
          </a>
          <strong>警告！</strong>您的输入数据有问题。
        </div>
        <div class="section">
          <div class="header">
            <h5><i class="fa fa-desktop"></i>轨迹追踪</h5>
                <a href="javascript:void(0)">
                    <i class="fa fa-caret-down"></i>
                </a>
          </div>
          <div class="body" >
      		  <div id="container" style="width: 700px;height: 700px"></div>
      	  </div>
        </div>
      </div>
        Message to send:   <input type="text" id="msg" />  
      <input type="button" onclick="sendMsg();" value="发送" />  


</body>
<script type="text/javascript">
var chart = echarts.init(document.getElementById('container'));
//var data = [[0,1,-1], [0,0,0]];

/*
 点的格式是[经度， 维度]
*/
var routes = [
  [[39.956589, 43.449928],[115.00, 39.0011, ]]]
chart.setOption({
    backgroundColor: '#FFF',
    globe: {
        baseTexture: "{{ static_url('images/earth.jpeg')}}",
        //heightTexture: '/asset/get/s/data-1491889019097-rJQYikcpl.jpg',
        shading: 'lambert',
        light: {
            ambient: {
                intensity: 0.3
            },
            main: {
                intensity: 0.3
            }
        },
        viewControl: {
            autoRotate: false,
            targetCoord: [116.46, 39.92]
        }
    },
    series: {
        type: 'lines3D',
        coordinateSystem: 'globe',
        blendMode: 'lighter',
        lineStyle: {
            width: 2,
            color: '#3A5FCD',
            opacity: 0.9
        },

        effect: {
                show: true,
                period: 4,
                trailLength: 0.02,
                symbol: 'arrow',
                symbolSize: 5,
        },
        data: routes
    }
});
</script>
<script type="text/javascript">  
    var ws;  
    function onLoad(){  
        ws = new WebSocket("ws://localhost:8000/ws");  
        ws.onmessage = function(e){  
            //alert(e.data)
            console.log(e.data);  
        }  
    }  
  
  
    function sendMsg(){  
        ws.send(document.getElementById('msg').value);  
    }  
</script> 
</html>